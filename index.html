<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Continuant AI Discovery Agent Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f3f4f6;
            margin: 0;
            padding: 20px;
        }
        #chat-container {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 320px;
            height: 400px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            z-index: 1000;
        }
        #chat-header {
            background-color: #3b82f6;
            color: white;
            padding: 6px;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
        }
        #chat-output {
            height: 240px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
            padding: 6px;
            margin: 6px;
            border-radius: 4px;
            font-size: 12px;
        }
        .message {
            margin: 4px 0;
            padding: 4px;
            border-radius: 4px;
            font-size: 12px;
        }
        .bot-message {
            background-color: #e5e7eb;
        }
        .user-message {
            background-color: #3b82f6;
            color: white;
            text-align: right;
        }
        #chat-input {
            width: calc(100% - 12px);
            padding: 6px;
            margin: 6px;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            font-size: 12px;
        }
        #options-container {
            margin: 6px;
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }
        .option-button {
            background-color: #3b82f6;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }
        .option-button:hover {
            background-color: #2563eb;
        }
        .admin-note {
            background-color: #fefcbf;
            padding: 6px;
            margin: 6px;
            border-radius: 4px;
            font-size: 11px;
            overflow-y: auto;
            max-height: 80px;
        }
        #toggle-chat {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #3b82f6;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            font-size: 24px;
        }
        #toggle-chat:hover {
            background-color: #2563eb;
        }
        @media (max-width: 480px) {
            #chat-container {
                width: 90%;
                height: 350px;
                top: 100px;
                left: 50%;
                transform: translateX(-50%);
            }
            #chat-output {
                height: 200px;
            }
        }
    </style>
</head>
<body>
    <div id="sample-content">
        <h1 class="text-lg font-bold text-center mb-4">Continuant AI Agent</h1>
    </div>

    <div id="chat-container">
        <div id="chat-header">Continuant AI Discovery Agent</div>
        <div class="admin-note">
            <p><strong>Note for HubSpot Admins:</strong> Responses are logged to the console (F12 > Console). For live integration, replace <code>YOUR_PORTAL_ID</code> and <code>YOUR_FORM_GUID</code> with HubSpot credentials and create a form with matching fields.</p>
        </div>
        <div id="chat-output"></div>
        <input id="chat-input" type="text" placeholder="Type your response...">
        <div id="options-container"></div>
    </div>

    <div id="toggle-chat" title="Toggle Agent">✖</div>

    <script>
        // Placeholder HubSpot Forms API configuration
        const HUBSPOT_PORTAL_ID = 'YOUR_PORTAL_ID'; // Replace with HubSpot Portal ID for live integration
        const HUBSPOT_FORM_GUID = 'YOUR_FORM_GUID'; // Replace with HubSpot Form GUID for live integration

        const questions = [
            // Customer Service (B2B, B2C, CXAI-inspired)
            {
                text: "What’s your primary contact center platform?",
                options: ["Genesys", "Cisco", "Avaya", "None", "Other (please specify)"],
                key: "cx_platform"
            },
            {
                text: "What’s the top CX challenge in your contact center?",
                options: ["Long wait times", "Agent burnout", "Low resolution rates", "Other (please specify)"],
                key: "cx_challenge"
            },
            {
                text: "Do you use AI for customer interactions?",
                options: ["Yes, chatbots", "Yes, IVR", "No, exploring", "No, not interested", "Other (please specify)"],
                key: "cx_ai_usage"
            },
            // IT Help Desk (Internal, CXAI-inspired)
            {
                text: "How often do IT tickets involve CX system issues?",
                options: ["Rarely", "Occasionally", "Frequently", "Constantly", "Other (please specify)"],
                key: "it_cx_ticket_frequency"
            },
            {
                text: "What’s the top IT help desk priority for CX support?",
                options: ["System uptime", "Fast resolution", "User training", "Other (please specify)"],
                key: "it_cx_priority"
            },
            {
                text: "Do you use AI for IT ticket triage?",
                options: ["Yes, fully automated", "Yes, partially", "No, exploring", "No, not interested", "Other (please specify)"],
                key: "it_ai_triage"
            },
            // Internal Processes (Internal, CXAI-inspired)
            {
                text: "Which CX process is most manual in your organization?",
                options: ["Call logging", "Agent scheduling", "Quality assurance", "Other (please specify)"],
                key: "ip_cx_manual_process"
            },
            {
                text: "How integrated are your CX systems with other tools?",
                options: ["Fully integrated", "Partially integrated", "Not integrated", "Other (please specify)"],
                key: "ip_cx_integration"
            },
            {
                text: "What’s the top barrier to CX process automation?",
                options: ["Cost", "Complexity", "Resistance to change", "Other (please specify)"],
                key: "ip_cx_automation_barrier"
            },
            // Marketing & Sales (B2B, B2C, CXAI-inspired)
            {
                text: "Do you use AI for customer sentiment analysis?",
                options: ["Yes, extensively", "Yes, limited", "No, exploring", "No, not interested", "Other (please specify)"],
                key: "ms_cx_sentiment_ai"
            },
            {
                text: "How do you leverage CX data for sales?",
                options: ["Upsell opportunities", "Customer retention", "Lead scoring", "Not leveraged", "Other (please specify)"],
                key: "ms_cx_data_usage"
            },
            {
                text: "What’s the top CX-related marketing challenge?",
                options: ["Personalization", "Data accuracy", "Campaign timing", "Other (please specify)"],
                key: "ms_cx_marketing_challenge"
            },
            // Data Analytics (B2B, B2C, Internal, CXAI-inspired)
            {
                text: "How do you analyze CX data today?",
                options: ["Real-time dashboards", "Periodic reports", "Manual analysis", "No analysis", "Other (please specify)"],
                key: "da_cx_data_analysis"
            },
            {
                text: "What’s the top CX analytics goal?",
                options: ["Improve satisfaction", "Reduce churn", "Optimize operations", "Other (please specify)"],
                key: "da_cx_analytics_goal"
            },
            {
                text: "Do you use predictive AI for CX insights?",
                options: ["Yes, extensively", "Yes, limited", "No, exploring", "No, not interested", "Other (please specify)"],
                key: "da_cx_predictive_ai"
            }
        ];

        let currentQuestionIndex = 0;
        const responses = {};
        const userEmail = prompt("Please enter your email to start the questionnaire (for follow-up):");

        const chatContainer = document.getElementById('chat-container');
        const chatOutput = document.getElementById('chat-output');
        const chatInput = document.getElementById('chat-input');
        const optionsContainer = document.getElementById('options-container');
        const toggleChat = document.getElementById('toggle-chat');

        function displayMessage(message, type) {
            const div = document.createElement('div');
            div.className = `message ${type}`;
            div.textContent = message;
            chatOutput.appendChild(div);
            chatOutput.scrollTop = chatOutput.scrollHeight;
        }

        function displayOptions(options) {
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.textContent = option;
                button.onclick = () => handleOptionClick(option);
                optionsContainer.appendChild(button);
            });
        }

        function handleOptionClick(option) {
            if (option === "Other (please specify)") {
                chatInput.style.display = 'block';
                chatInput.focus();
            } else {
                saveResponse(option);
                displayMessage(option, 'user-message');
                moveToNextQuestion();
            }
        }

        function saveResponse(response) {
            responses[questions[currentQuestionIndex].key] = response;
            localStorage.setItem('ai_discovery_responses', JSON.stringify(responses));
            console.log('Response saved:', { key: questions[currentQuestionIndex].key, value: response });
        }

        function submitToHubSpot() {
            const formData = {
                fields: [
                    { name: 'email', value: userEmail },
                    ...Object.keys(responses).map(key => ({ name: key, value: responses[key] }))
                ],
                context: {
                    pageUri: window.location.href,
                    pageName: document.title
                }
            };
            console.log('Simulated HubSpot submission:', formData);
            // Uncomment for live integration
            /*
            fetch(`https://api.hsforms.com/submissions/v3/integration/submit/${HUBSPOT_PORTAL_ID}/${HUBSPOT_FORM_GUID}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => console.log('Form submitted:', data))
            .catch(error => console.error('Error submitting to HubSpot:', error));
            */
        }

        function moveToNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                displayMessage(questions[currentQuestionIndex].text, 'bot-message');
                displayOptions(questions[currentQuestionIndex].options);
                chatInput.style.display = 'none';
            } else {
                displayMessage("Thank you for completing the questionnaire! We'll follow up with tailored AI recommendations.", 'bot-message');
                optionsContainer.innerHTML = '';
                chatInput.style.display = 'none';
                submitToHubSpot();
            }
        }

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && chatInput.value.trim()) {
                const response = chatInput.value.trim();
                displayMessage(response, 'user-message');
                saveResponse(response);
                chatInput.value = '';
                moveToNextQuestion();
            }
        });

        toggleChat.addEventListener('click', () => {
            if (chatContainer.style.display === 'flex') {
                chatContainer.style.display = 'none';
                toggleChat.textContent = '💬';
            } else {
                chatContainer.style.display = 'flex';
                toggleChat.textContent = '✖';
            }
        });

        function startChat() {
            if (userEmail) {
                displayMessage("Welcome to Continuant’s AI Discovery Agent! Let’s assess your AI readiness for customer experience and beyond. " + questions[0].text, 'bot-message');
                displayOptions(questions[0].options);
            } else {
                displayMessage("Please provide a valid email to continue.", 'bot-message');
            }
        }

        startChat();
    </script>
</body>
</html>
